"""
База знаний о паттернах для системы анализа валютных пар.
Содержит структурированную информацию о ключевых паттернах технического анализа.
"""

# База знаний о паттернах технического анализа
PATTERN_KNOWLEDGE = {
    "Двойное дно": {
        "описание": "W-образный паттерн разворота тренда, указывающий на потенциальное завершение нисходящего движения",
        "ключевые_признаки": [
            "Два последовательных минимума примерно на одном уровне",
            "Объем обычно выше при формировании второго минимума",
            "Подтверждается пробоем линии сопротивления, проведенной через вершину между минимумами"
        ],
        "торговая_стратегия": {
            "сигнал": "Покупка",
            "точка_входа": "После пробоя линии сопротивления",
            "стоп_лосс": "Под вторым минимумом",
            "тейк_профит": "Как минимум равен расстоянию от линии сопротивления до минимумов"
        },
        "надежность": "Высокая при чётком W-образном профиле и подтверждении пробоя",
        "важные_факторы": [
            "Чем дальше друг от друга минимумы, тем менее надежен паттерн",
            "Более надежен на старших таймфреймах",
            "Важно дождаться подтверждения пробоя линии сопротивления"
        ]
    },
    "Двойная вершина": {
        "описание": "М-образный паттерн разворота тренда, указывающий на завершение восходящего движения",
        "ключевые_признаки": [
            "Два последовательных максимума примерно на одном уровне",
            "Объем обычно выше при формировании второго максимума",
            "Подтверждается пробоем линии поддержки ('шея' паттерна)"
        ],
        "торговая_стратегия": {
            "сигнал": "Продажа",
            "точка_входа": "После пробоя линии поддержки",
            "стоп_лосс": "Над вторым максимумом",
            "тейк_профит": "Как минимум равен расстоянию от линии поддержки до максимумов"
        },
        "надежность": "Высокая при чётком М-образном профиле и подтверждении пробоя",
        "важные_факторы": [
            "Чем дальше друг от друга максимумы, тем менее надежен паттерн",
            "Более надежен на старших таймфреймах",
            "Важно дождаться подтверждения пробоя линии поддержки"
        ]
    },
    "Восходящий клин": {
        "описание": "Паттерн продолжения или разворота тренда в виде сужающегося канала с восходящими границами",
        "ключевые_признаки": [
            "Верхняя и нижняя границы сходятся и направлены вверх",
            "Объемы обычно снижаются по мере формирования паттерна",
            "Пробой обычно происходит вниз"
        ],
        "торговая_стратегия": {
            "сигнал": "Продажа",
            "точка_входа": "После пробоя нижней границы клина",
            "стоп_лосс": "Над верхней границей клина",
            "тейк_профит": "Как минимум равен ширине клина в его начале"
        },
        "надежность": "Средняя, требует подтверждения пробоя и увеличения объемов",
        "важные_факторы": [
            "Чем дольше формируется паттерн, тем надежнее сигнал",
            "Уменьшение объемов внутри клина и увеличение при пробое повышает надежность",
            "Чётко выраженные границы повышают вероятность успешного сигнала"
        ]
    },
    "Нисходящий клин": {
        "описание": "Паттерн продолжения или разворота тренда в виде сужающегося канала с нисходящими границами",
        "ключевые_признаки": [
            "Верхняя и нижняя границы сходятся и направлены вниз",
            "Объемы обычно снижаются по мере формирования паттерна",
            "Пробой обычно происходит вверх"
        ],
        "торговая_стратегия": {
            "сигнал": "Покупка",
            "точка_входа": "После пробоя верхней границы клина",
            "стоп_лосс": "Под нижней границей клина",
            "тейк_профит": "Как минимум равен ширине клина в его начале"
        },
        "надежность": "Средняя, требует подтверждения пробоя и увеличения объемов",
        "важные_факторы": [
            "Чем дольше формируется паттерн, тем надежнее сигнал",
            "Уменьшение объемов внутри клина и увеличение при пробое повышает надежность",
            "Чётко выраженные границы повышают вероятность успешного сигнала"
        ]
    },
        "Линия тренда": {
        "описание": "Устойчивая линейная тенденция изменения цены, которую можно аппроксимировать прямой линией.",
        "ключевые_признаки": [
            "Цена движется в одном направлении с минимальными отклонениями",
            "Не менее 3-х точек касания линии тренда",
            "Угол наклона линии находится в оптимальном диапазоне (не слишком пологий и не слишком крутой)"
        ],
        "торговая_стратегия": {
            "сигнал": "Покупка при восходящем тренде, продажа при нисходящем",
            "точка_входа": "После подтверждения отскока от линии тренда",
            "стоп_лосс": "Ниже линии тренда для восходящего тренда, выше линии тренда для нисходящего",
            "тейк_профит": "Зависит от силы тренда, обычно 2-3 ATR от точки входа"
        },
        "надежность": "Средняя, требует подтверждения дополнительными индикаторами",
        "важные_факторы": [
            "Чем больше точек касания, тем надежнее линия тренда",
            "Рекомендуется использовать в сочетании с другими индикаторами",
            "Прорыв линии тренда может сигнализировать о развороте тренда"
        ]
    }
}

def show_pattern_info():
    """Отображает подробную информацию о паттернах в консоли"""
    print("\n" + "=" * 80)
    print("\033[1;37;44m ИНФОРМАЦИЯ О ПОДДЕРЖИВАЕМЫХ ПАТТЕРНАХ \033[0m")
    print("=" * 80)
    
    for pattern_name, knowledge in PATTERN_KNOWLEDGE.items():
        print(f"\n\033[1;32;40m {pattern_name.upper()} \033[0m")
        print("-" * 80)
        
        print(f"\033[1;37;40m ОПИСАНИЕ: \033[0m")
        print(f"   {knowledge['описание']}")
        
        print(f"\033[1;37;40m КЛЮЧЕВЫЕ ПРИЗНАКИ: \033[0m")
        for i, feature in enumerate(knowledge['ключевые_признаки'], 1):
            print(f"   {i}. {feature}")
        
        strategy = knowledge['торговая_стратегия']
        print(f"\033[1;37;40m ТОРГОВАЯ СТРАТЕГИЯ: \033[0m")
        print(f"   Сигнал: {strategy['сигнал']}")
        print(f"   Точка входа: {strategy['точка_входа']}")
        print(f"   Стоп-лосс: {strategy['стоп_лосс']}")
        print(f"   Тейк-профит: {strategy['тейк_профит']}")
        
        print(f"\033[1;37;40m НАДЕЖНОСТЬ: \033[0m {knowledge['надежность']}")
        
        print(f"\033[1;37;40m ВАЖНЫЕ ФАКТОРЫ: \033[0m")
        for i, factor in enumerate(knowledge['важные_факторы'], 1):
            print(f"   {i}. {factor}")
    
    print("\n" + "=" * 80)
