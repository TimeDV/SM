Техническая документация ScalpMaster
Архитектура системы
Основные файлы проекта
Базовые модули

main.py — точка входа в программу (базовая версия)
binary_analyzer.py — анализатор для бинарных опционов
simple_analyzer.py — базовый класс анализатора паттернов
pattern_detection.py — алгоритмы обнаружения технических паттернов
candle_detection.py — алгоритмы распознавания свечей на графике
binary_indicators.py — расчет технических индикаторов
visualization.py — отображение результатов анализа
screen_capture.py — захват области экрана
currency_profiles.py — профили настроек для валютных пар
pattern_logger.py — расширенное логирование прогнозов
forecast_stats.py — анализ статистики прогнозов

ML-компоненты

sm_ml_main.py — точка входа для версии с ML
ml_pattern_analyzer.py — анализатор паттернов с использованием ML
ml_integration.py — интеграция ML-моделей с традиционными алгоритмами
ml_data_processor.py — обработка данных для моделей машинного обучения
ml_visualization.py — визуализация результатов ML

Расширенные ML-компоненты

advanced_features.py — извлечение расширенных признаков
lstm_analyzer.py — анализ временных рядов с помощью LSTM
ml_enhanced_integration.py — улучшенная интеграция ML и LSTM
test_enhanced_ml.py — тестирование расширенных ML-компонентов

Иерархия классов
SimplePatternAnalyzer (в simple_analyzer.py)
  ↓
BinaryPatternAnalyzer (в binary_analyzer.py)
  ↓
MLBinaryPatternAnalyzer (в sm_ml_main.py)
  ↓
EnhancedBinaryPatternAnalyzer (в run_enhanced_scalpmaster.py)
Настройка и конфигурация
Настройки ML-компонентов

Веса алгоритмов: соотношение влияния традиционных алгоритмов, ML-моделей и LSTM
Параметры LSTM: размер окна последовательности (15), горизонт прогнозирования (1)
Переобучение моделей: автоматическое переобучение каждые 24 часа

Настройки распознавания паттернов
В файле pattern_detection.py можно изменить параметры для каждого паттерна:

Двойное дно/вершина: порог сходства уровней, минимальное расстояние между точками
Клинья: минимальное количество точек контакта, максимальный угол между линиями
Линии тренда: минимальное качество аппроксимации, допустимые углы наклона

Настройки индикаторов
В файле binary_indicators.py настраиваются параметры технических индикаторов:

RSI: период расчета, уровни перекупленности/перепроданности
Полосы Боллинджера: период, стандартное отклонение
Моментум: период расчета

Необходимые улучшения
Критические исправления

Исправление ошибок в методе analyze_binary_signal:

Устранение рекурсивного вызова в binary_analyzer.py
Синхронизация количества возвращаемых значений


Исправление ошибок в ML-компонентах:

В ml_pattern_analyzer.py ошибка в методе extract_features при обращении к 'center_y' вместо 'y'



Рекомендуемые улучшения

Архитектурные улучшения:

Консолидация дублирующихся файлов (run_enhanced_scalpmaster.py и sm_ml_main.py)
Удаление избыточных файлов (trendline_pattern.py при наличии полной функциональности в pattern_detection.py)
Создание единого входного файла с параметрами режима работы


Технические улучшения:

Создание унифицированного интерфейса для всех версий анализатора
Улучшение обработки ошибок и исключений
Внедрение системы конфигурации на основе JSON/YAML файлов
Обновление логики выбора области экрана с возможностью сохранения настроек


Функциональные улучшения:

Добавление CNN для анализа скриншотов
Интеграция с экономическим календарем для учета новостного фона
Расширение набора распознаваемых паттернов (флаги, треугольники и т.д.)
Реализация автоматической торговли через API брокера
Разработка системы управления рисками


Оптимизация производительности:

Оптимизация алгоритмов обработки изображений для снижения потребления ресурсов
Использование GPU для ускорения работы нейронных сетей
Буферизация данных для уменьшения количества операций захвата экрана
